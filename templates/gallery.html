{% extends "base.html" %} {% block title %}Gallery{% endblock %} {% block content %}
<br>
<br>
<h3 style="text-align:center">Your gallery</h3>
<h5 style="text-align:center">View your posts and contributions to the Georepair website here!</h5>
<div id="vue-app">
    <div v-for="scan in repairs">
        <div class="card" style="width: 30rem; margin: auto;">
            <img class="card-img-top" :src="scan.url" :alt="scan.description">
            <div class="card-body">
                <h3 class="card-title">[[ scan.title ]]</h3>
                <p class="card-title">[[ scan.upvote ]] upvotes</p>
                <hr>
                <p class="card-text"><i>Location: ([[scan.position.lat]], [[scan.position.long]])</i></p>
            </div>
        </div>
        <br>
    </div>
</div>
{% endblock %} {% block scripts %}
<script src="https://unpkg.com/vue@2.6.14/dist/vue.min.js"></script>

<script type="text/javascript">
    var app = new Vue({
        el: "#vue-app",
        delimiters: ['[[', ']]'],
        data() {
            return {
                repairs: [],
            };
        },
        methods: {
            getCurrent: function() {
                $.post(
                    "/api/scans/gallery",

                    function(res) {
                        app.repairs = res.repairs;
                    }
                );
            },
        }
    });

    app.getCurrent();
    setInterval(app.getCurrent, 60000);
</script>
{% endblock %}